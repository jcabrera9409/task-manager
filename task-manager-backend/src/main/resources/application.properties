# ================================
# TASK MANAGER QUARKUS - CONFIGURATION
# ================================

# =====================================
# DATABASE CONFIGURATION (REQUERIDO)
# =====================================
quarkus.datasource.db-kind=mysql
quarkus.datasource.username=${USER_BD:root}
quarkus.datasource.password=${PASSWORD_BD:root}
quarkus.datasource.jdbc.url=${DATASOURCE_BD:jdbc:mysql://localhost:3306/tmdb}
quarkus.datasource.jdbc.max-size=16

# =====================================
# HIBERNATE ORM (REQUERIDO)
# =====================================
# Estrategia de actualización de BD
quarkus.hibernate-orm.database.generation=update

# Naming strategy para compatibilidad con BD existente
quarkus.hibernate-orm.physical-naming-strategy=org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl

# Configuración de desarrollo
%dev.quarkus.hibernate-orm.log.sql=true
%dev.quarkus.hibernate-orm.validate-in-dev-mode=false

# =====================================
# JWT SECURITY (REQUERIDO)
# =====================================
# SmallRye JWT Configuration

# DESARROLLO: Keys locales (fuera del proyecto)
%dev.mp.jwt.verify.publickey.location=${JWT_PUBLIC_KEY_PATH:file:/Users/surrender/Proyectos/task-manager/dev/publicKey.pem}
%dev.smallrye.jwt.sign.key.location=${JWT_PRIVATE_KEY_PATH:file:/Users/surrender/Proyectos/task-manager/dev/privateKey.pem}

# TESTING: Keys temporales para tests
%test.mp.jwt.verify.publickey.location=${JWT_PUBLIC_KEY_PATH:file:/Users/surrender/Proyectos/task-manager/dev/publicKey.pem}
%test.smallrye.jwt.sign.key.location=${JWT_PRIVATE_KEY_PATH:file:/Users/surrender/Proyectos/task-manager/dev/privateKey.pem}

# PRODUCCIÓN: Keys desde variables de entorno (OBLIGATORIO)
%prod.mp.jwt.verify.publickey.location=${JWT_PUBLIC_KEY_PATH}
%prod.smallrye.jwt.sign.key.location=${JWT_PRIVATE_KEY_PATH}

# JWT Issuer y configuración común
mp.jwt.verify.issuer=https://task-manager.com
jwt.expiration.time=3600

# =====================================
# CORS (SOLO DESARROLLO)
# =====================================
# ADVERTENCIA: Configuración insegura solo para desarrollo
%dev.quarkus.http.cors=true
%dev.quarkus.http.cors.origins=http://localhost:3000,http://127.0.0.1:3000
%dev.quarkus.http.cors.headers=accept,authorization,content-type,x-requested-with
%dev.quarkus.http.cors.methods=GET,POST,PUT,DELETE,OPTIONS

# PRODUCCIÓN: CORS restrictivo
%prod.quarkus.http.cors=true
%prod.quarkus.http.cors.origins=https://task-manager.com
%prod.quarkus.http.cors.headers=accept,authorization,content-type
%prod.quarkus.http.cors.methods=GET,POST,PUT,DELETE

# =====================================
# API DOCUMENTATION
# =====================================
quarkus.swagger-ui.always-include=true
mp.openapi.extensions.smallrye.info.title=Task Manager API
mp.openapi.extensions.smallrye.info.version=1.0.0
mp.openapi.extensions.smallrye.info.description=Sistema de gestión de tareas

# =====================================
# LOGGING (OPCIONAL)
# =====================================
# Configuración de logs en consola
%dev.quarkus.log.console.level=DEBUG
%prod.quarkus.log.console.level=INFO

# Configuración de logs en archivo
quarkus.log.file.enable=true
quarkus.log.file.path=${APP_PATH:.}/logs/app.log
quarkus.log.file.level=INFO
quarkus.log.file.format=%d{yyyy-MM-dd HH:mm:ss,SSS} %-5p [%c{3.}] (%t) %s%e%n

# Configuración de rotación de archivos de log
quarkus.log.file.rotation.max-file-size=10M
quarkus.log.file.rotation.max-backup-index=5

# Logs específicos por ambiente
%dev.quarkus.log.file.level=DEBUG
%test.quarkus.log.file.enable=false
%prod.quarkus.log.file.level=INFO